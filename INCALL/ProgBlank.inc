; имя файла   ProgBlank.inc
;**************** Оглавление: Бланк заполнения основной программы
;1        Н!АЧАЛО_Программы Форма*!=PE*,Вывод*!=Console*,Вход*!=start*
;2        СЕКЦИЯ_ДАННЫХ Имя=data,Чтение=+,Запись=+
;3        СЕКЦИЯ_КОМАНД    Имя=code,Чтение=+,Запись=+,Исполнение=+,ТочкаВхода=start
;4    3а        Факси́миле    Шестнадцатиричное__не_больше_8_цифр=09041949
;5    3б        ПроверкаФакси́миле arg/" "
; 6        СЕГМЕНТ_ИМПОРТА
; ******************************
; ********************* НАЧАЛО_Программы
; ВЫЗОВ ОПЕРАТОРА:
;    НАЧАЛО_Программы Форма*!=PE*,Вывод*!=Console*,Имя_Входа*!=start*
;Форма представления в памяти         =PE exe\ =DLL dll;
;вывод ­                             Console
;Начальный адрес входа                start
;******************************************
MACRO НАЧАЛО_Программы PE,Console,start
{
common    match an1 == FR an2 == OUT an3 == met,PE Console start
                \{
format    \FR    \OUT        ;Форма представления в памяти вывод
entry    \met
                \}
}
;*********************************************
;   СЕКЦИЯ_ДАННЫХ Имя=data,Чтение=+,Запись=+
;*************************************
MACRO СЕКЦИЯ_ДАННЫХ arg1,arg2,arg3
{
common match an1 == NM an2 == RD an3 == WR,arg1 arg2 arg3
    \{
    common    match L1=+ =+,\RD \WR
    \\{
section '.data' \NM readable writeable
    \\}
    common    match L1=+ =-,\RD \WR
    \\{
section '.data' \NM readable
    \\}
    \}
}
;*************************************
;    СЕКЦИЯ_КОМАНД    Имя=code,Чтение=+,Запись=+,Исполнение=+,ТочкаВхода=start
;*************************************
MACRO СЕКЦИЯ_КОМАНД
{
section '.code' code readable writeable executable
start:                    ;Начало программы
}
;**********************************************
;***************************************************************
;Fac@simile    equ    09041949h    ;фиксированное имя Fac@simile
;                            ; при входе из программы должно быть 09041949h
;    push    F@amile        ; Для контроля стека
;    Факси́миле    Шестнадцатиричное__не_больше_8_цифр=09041949
Fac@simile    equ
    MACRO    Факси́миле    arg
    {
    common match an1 == FR,arg
                \{
Fac@simile    equ FR
    push    Fac@simile                        ; только вместе с ПроверкаФакси́миле
                \}
    }
;**************************
; СИНОНИМ Факси́миле
MACRO УстановитьФакси́миле    arg
{
    Факси́миле    arg
}
;**************************************
;*************************ПроверкаФакси́миле arg/" " ********************************
;    ПроверкаФакси́миле    Шестнадцатиричное__не_больше_8_цифр=09041949

MACRO ПроверкаФакси́миле    arg
{
    common    match an1 == FR,arg
                \{
                                        ;if used Факси́миле
Fac@simile    equ FR
        pop    EAX
        if ~FR    eq
        xor EAX,FR
        else
        xor EAX,EAX

    je    @F
        end if
    invoke    ExitProcess, 7777h
@@:
        ;else
        ;Пропускаем оператор и ПРЕДУПРЕЖДЕНИЕ
    ;Print!Rafall 'ПРЕДУПРЕЖДЕНИЕ:   "ПроверкаФакси́миле" должно быть вместе с "УстановитьФакси́миле"'
        ;end if
    \}
}
;*****************************СЕГМЕНТ_ИМПОРТА*******************
;**Импортировать библиотеки=(kernel,dfen),\ с_функциями=(ExitProcess,GetStdHandle,WriteConsole)**
;
;***СЕГМЕНТ_ИМПОРТА    bibl=(kernel,dfen),funcion=(ExitProcess,GetStdHandle,WriteConsole,ReadConsole,\
;                                    CloseHandle,CreateFile,WriteFile,ReadFile,GetFileSize)
MACRO СЕГМЕНТ_ИМПОРТА                ;Пока без параметров
{
    section '.idata' import readable
    include '.\BIBLMCN\DLLALL.inc'
}

;*********************************************************